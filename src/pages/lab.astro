---
import ServicesCards from "@components/labs/ServicesCards.astro";
import Page from "@layouts/Page.astro";
import services_yml from "@configs/services.yml";

let running = 0,
  stopped = 0,
  error = 0;

services_yml.groups.map((group) => {
  group.services.map((service) => {
    switch (service.status) {
      case "running":
        running++;
        break;
      case "stopped":
        stopped++;
        break;
      case "error":
        error++;
        break;
      default:
        running++;
        break;
    }
  });
});
---

<Page
  title="实验室"
  heading="生命不息，折腾不止。"
  caption="我自托管的各种开源服务。"
>
  <p class="secondary-color text-center mt-16">
    <span class="mr-4">
      <span class="bg-green-500 rounded-full w-2 h-2 inline-block align-middle"
      ></span>
      {running} 运行中
    </span>
    <span class="mr-4">
      <span class="bg-yellow-500 rounded-full w-2 h-2 inline-block align-middle"
      ></span>
      {stopped} 暂时关闭
    </span>
    <span>
      <span class="bg-red-500 rounded-full w-2 h-2 inline-block align-middle"
      ></span>
      {error} 故障
    </span>
  </p>
  <ServicesCards groups={services_yml.groups} />
</Page>
