---
import Layout from "@layouts/Layout.astro";
import Menu from "@components/menu/Menu.astro";
import Bento from "@components/bento/Bento.astro";
import ProjectsCards from "@components/projects/ProjectsCards.astro";
import Rating from "@components/Rating.astro";
import projects_yml from "@configs/projects.yml";
import menu_yml from "@configs/menu.yml";
---

<Layout title="SkyWT" includeHeader={false}>
  <main>
    <section class="min-h-screen flex flex-col justify-center">
      <div class="container">
        <h1 class="drop-shadow-xl primary-color fade-in">
          <span>✨ Passion <br /> Never Fails.</span>
        </h1>
        <h4 class="mt-4 font-bold drop-shadow-xl secondary-color fade-in">
          热爱与激情永不止息。
        </h4>
        <div class="mt-12 font-thin tertiary-color fade-in">
          <span class="mr-2">SkyWT</span>
          <Menu includeHome={false} items={menu_yml.items} />
        </div>
        <p id="scroll-hint" class="mt-2 font-thin tertiary-color opacity-0">
          <i class="ri-scroll-to-bottom-line"></i>
          滚动滚轮或滑动触控板继续浏览
        </p>
        <script is:inline>
          var hintTimer = null;
          document.addEventListener(
            "astro:page-load",
            () => {
              hintTimer = setTimeout(() => {
                let scrollHintEle = document.querySelector("#scroll-hint");
                if (scrollHintEle) {
                  // 这里的写法不太好
                  scrollHintEle.classList.add("fade-in");
                  scrollHintEle.classList.remove("opacity-0");
                }
              }, 5000);
            },
            { once: false }
          );
          document.addEventListener(
            "astro:before-swap",
            () => {
              clearTimeout(hintTimer);
              hintTimer = null;
            },
            { once: false }
          );
        </script>
        <p id="too-small-hint" class="mt-2 primary-color">
          <i class="ri-alert-line"></i> 本站针对屏幕宽度不小于 375 像素的设备设计。您的屏幕太小，页面可能无法正常显示。
        </p>
      </div>
      <!-- <div
        class="absolute top-0 right-0 h-screen -z-10 transform-gpu overflow-hidden w-full blur-3xl"
        aria-hidden="true"
      >
        <div
          class="aspect-[1020/880] w-[55rem] flex-none sm:right-1/4 sm:translate-x-1/2 dark:hidden bg-gradient-to-tr from-green-400 to-purple-300 opacity-40"
          style="clip-path: polygon(100% 0px, 90% 55%, 70% 100%, 50% 50%, 0px 20%, 50% 0px);"
        >
        </div>
      </div> -->
    </section>

    <hr class="container" />

    <section>
      <h2 class="text-center">你好 👋 我是 SkyWT。</h2>
      <Bento />
    </section>

    <!-- <hr class="container" />

    <section>
      <div class="container">
        <h2 class="text-center">分享生活</h2>
        <div class="primary-color flex flex-wrap"></div>
      </div>
    </section> -->

    <hr class="container" />

    <section>
      <div class="wide-container">
        <h4 class="secondary-color text-center">
          <i class="ri-code-s-slash-line"></i> 我的项目集
        </h4>
        <h1 class="primary-color leading-normal text-center">
          独立设计和开发<br />只是为了好玩……
        </h1>
        <div class="mt-8">
          <ProjectsCards projects={projects_yml.projects} />
        </div>
      </div>
    </section>

    <!-- <hr class="container py-8" />
  <section class="wide-container my-8 py-20">
    <h3 class="m-6 primary-color">友谊地久天长。</h3>
    <Friends />
  </section> -->

    <hr class="container" />

    <section>
      <div class="container primary-color">
        <h2>关于本站</h2>
        <div class="mt-8 content">
          <p class="card p-2">
            ⚙️
            这个网站目前还在开发测试阶段，只上线了部分功能，并且可能会出现奇怪的
            bug。
          </p>
          <p>欢迎来到 skywt.cn，这是我在信息汪洋里的一个家。</p>
          <p>
            几乎每年，我都会使用新的技术重新设计我的网站。你现在看到的是 2024
            版。这一版本由 Astro、TypeScript、Tailwind.css 等技术驱动，由
            ChatGPT、Copilot
            等协助编写。感谢这些技术让开发体验变得如此优雅和美妙。
          </p>
          <p>
            这个网站的整套程序，命名为 Daydreamer。我将其定义为一个持续开发的
            playground，之后将会尝试陆续添加各种好玩的功能。
          </p>
          <!-- <p>
            从创建至今，这个网站已运行
            <span id="uptime"></span>
            <span>。</span>
          </p> -->
          <!-- <p class="mt-2">查看设计手记，或者看看 2022 版和 2021 版。</p> -->
          <Rating />
        </div>
      </div>

      <!-- <script is:inline>
        const uptime = document.getElementById("uptime");
        const now = new Date();
        const grt = new Date("12/11/2017 11:00:00");
        const getUptime = () => {
          now.setTime(now.getTime() + 250);
          const diff = now.getTime() - grt.getTime();
          const dnum = Math.floor(diff / 1000 / 60 / 60 / 24);
          const hnum = Math.floor(diff / 1000 / 60 / 60 - 24 * dnum);
          const mnum = Math.floor(
            diff / 1000 / 60 - 24 * 60 * dnum - 60 * hnum,
          );
          const snum = Math.round(
            diff / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum,
          );

          uptime.innerText =
            (dnum ? dnum.toString() + " 天 " : "") +
            (hnum ? hnum.toString() + " 小时 " : "") +
            (mnum ? mnum.toString() + " 分 " : "") +
            (snum ? snum.toString() + " 秒" : "");
        };
        let timer = setInterval(getUptime, 250);

        document.addEventListener(
          "astro:before-swap",
          () => {
            clearInterval(timer);
          },
          { once: false },
        );
      </script> -->
    </section>
  </main>
</Layout>

<style lang="scss">
  .fade-in {
    @apply animate-fade-up animate-ease-in-out animate-duration-[800ms];
  }

  #scroll-hint {
    @apply hidden;
    @screen md {
      @apply block;
    }
  }

  #too-small-hint {
    @media (min-width: 375px) {
      @apply hidden;
    }
  }

  section {
    @apply py-16;
  }

  p {
    @apply leading-relaxed;
  }

  hr {
    @apply my-16;
  }
</style>
